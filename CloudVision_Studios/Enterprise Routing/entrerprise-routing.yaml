-
    service: arista.studio.v1.StudioConfigService
    method: Set
    body:
        value:
            key:
                studio_id: studio-enterprise-routing
                workspace_id: d05467d3-8a10-405c-8a39-cf4749331e6d
            display_name: 'Enterprise Routing'
            description: 'ver. 1.3.1 Deploy and manage routed networks with OSPF and BGP (including EVPN VXLAN overlay)'
            template:
                type: TEMPLATE_TYPE_MAKO
                body: "<%\nimport sys, os, json, ipaddress, re\nfrom typing import List\nimport tagsearch_python.tagsearch_pb2_grpc as tsgr\nimport tagsearch_python.tagsearch_pb2 as tspb\nfrom arista.tag.v2.services import TagServiceStub, TagAssignmentServiceStub, TagConfigServiceStub, TagAssignmentConfigServiceStub\nfrom arista.tag.v2.services.gen_pb2 import TagRequest, TagConfigSetRequest, TagStreamRequest, TagConfigStreamRequest, TagAssignmentStreamRequest, TagAssignmentConfigSetRequest, TagAssignmentConfigStreamRequest\nfrom arista.tag.v2.tag_pb2 import Tag, TagKey, TagAssignment, TagAssignmentKey, TagAssignmentConfig\n\nclass InterfaceConfig:\n  def __init__(self):\n    self.Port= \"\"\n    self.IPAddress= \"\"\n    self.Mask= \"\"\n    self.IPNetwork = \"\"\n    self.Host= \"\"\n    self.NeighborHostname = \"\"\n    self.NeighborPort= \"\"\n    self.ChannelGroup = \"\"\n\nclass Mlag:\n  def __init__(self):\n    self.ID = \"\"\n    self.PeerLink = False\n    self.Interfaces = []\n    self.MlagIPAddr = \"\"\n    self.MlagNetmask = \"\"\n    self.MlagNetwork = \"\"\n    self.MlagIPPeerAddr = \"\"\n    self.MlagPeerName = \"\"\n\nclass NeighborIntf:\n  def __init__(self):\n    self.IPAddress= \"\"\n    self.Port= \"\"\n    self.Host= \"\"\n\nclass BGPPeerGroup:\n  def __init__(self):\n    self.Name= \"\"\n    self.EVPN=False\n    self.Peerer=False\n    self.NeighborASN= \"\"\n    self.NeighborIntfs= []\n\nclass StaticRoutes:\n  def __init__(self):\n    self.Prefix= \"\"\n    self.NextHop= \"\"\n    self.Name= \"\"\n\nclass PLName:\n  def __init__(self):\n    self.SeqNum= \"\"\n    self.PermitDeny= \"\"\n    self.Prefix= \"\"\n    self.PrefixLength= \"\" \n    self.MaskLength= \"\"   \n\nclass PrefixLists:\n  def __init__(self):\n    self.PLName= []\n    self.Name= \"\"\n\nclass RouteMapIn:\n  def __init__(self):\n    self.SeqNum= \"\"\n    self.PermitDeny= \"\"\n    self.PrefixListIn= \"\"\n    self.MatchCommunity= \"\"\n    self.SetCommunity= \"\"\n    self.LocalPref= \"\"\n    self.PrependRepeat= \"\"\n\nclass RouteMapOut:\n  def __init__(self):\n    self.SeqNum= \"\"\n    self.PermitDeny= \"\"\n    self.PrefixListOut= \"\"\n    self.MatchCommunity= \"\"\n    self.SetCommunity= \"\"\n    self.PrependRepeat= \"\"\n\nclass PeerGroups:\n  def __init__(self):\n    self.PeerGroupName= \"\"\n    self.PeerASN= \"\"\n    self.Redis= \"\"  \n    self.Description= \"\"  \n    self.LocalAS= \"\"\n    self.NextHopSelf= \"\"\n    self.BFD= \"\"\n    self.eBGPMultiHopTTL= \"\"\n    self.MaxAcceptedRoutes= \"\"\n    self.RouteMapIn= []\n    self.RouteMapOut= []\n    self.eBGPNeighbors= []\n\nclass eBGPNeighbors:\n  def __init__(self):\n    self.NeighborIp= \"\"\n    self.PeerASN= \"\"\n    self.PeerGroup= \"\"\n\nclass ExternalInterfaces:\n  def __init__(self):\n    self.InterfaceName= \"\"\n    self.Description= \"\"\n    self.IPPrefix= \"\"\n    self.VlanID= \"\"\n    \nclass SwitchConfig:\n  def __init__(self):\n    self.Model =     \"\"\n    self.EOSVersion = \"\"\n    self.Role= \"\"\n    self.Hostname = \"\"\n    self.NodeNum = 0\n    self.FabricNetwork = []\n    self.FabricNetmask = \"\"\n    self.Interfaces = []\n    self.PortChannels = []\n    self.MlagMembers =    Mlag()\n    self.Loopback0IP = \"\"\n    self.Loopback0Network= \"\"\n    self.MlagIPAddr= \"\"\n    self.MlagIPPeerAddr = \"\"\n    self.MlagNetmask=\"\"\n    self.MlagNetwork= \"\"\n    self.MlagPeerName= \"\"\n    self.LogicalVTEP= \"\"\n    self.VirtualVTEP= \"\"\n    self.ASN= \"\"\n    self.BGPPeerGroups =  []\n    self.StaticRoutes = []\n    self.PrefixLists = []\n    self.PeerGroups = []\n    self.eBGPNeighbors = []\n    self.ExternalInterfaces = []\n  def interfaces(self):\n    return { i : self.Interfaces[i].data() for i in range(0, len(self.Interfaces) ) }\n\ndef get_isis_addr(area_id, area_number, lo0):\n    area_id_str = str(area_id)\n    if len(area_id_str) != 2:\n        area_id_str = '0'+area_id_str\n\n    area_number_str = str(area_number)\n    len_area_number_str = len(area_number_str)\n    for i in range(0, 4 - len_area_number_str) :\n        area_number_str = '0' + area_number_str\n\n    octets = lo0.split('.')\n    lo0_filled_with0 = \"\"\n    for octet in octets :\n        temp = octet\n        for i in range(0, 3 - len(octet)):\n            temp =  '0' + temp\n        lo0_filled_with0 = lo0_filled_with0 + temp\n    sys_id = lo0_filled_with0[0:4] +'.'+lo0_filled_with0[4:8]+'.'+lo0_filled_with0[8:12]\n    return area_id_str+'.'+area_number_str+'.'+sys_id+'.00'\n\ntagValues = {}\nmyPod = None\nmyNodeNum = None\nmyRole = None\nmlagTagged = False\nnetworkLabel = 'Network'\nerNumLabel = 'Edge-Router-Number'\ndcrrNumLabel = 'RR-Number'\ncoreNumLabel = 'Core-Router-Number'\nmyDevice = ctx.getDevice()\nmyDeviceID = ctx.getDevice().id\nhostnameLabel = 'device'\nerDomainLabel = 'Edge-Router-Domain'\nmodelLabel = 'model'\neosVersionLabel = 'eos'\nhostnameDeviceIDDict = {}\ndeviceIDNodeNumDict = {}\ndeviceIDSwitchConfigDict = {}\nmyerDomain = \"\"\nerDomainToDeviceIDDict = {}\ndeviceIDHostnameDict = {}\nhighesterNumber = 0\nhighestrrNumber = 0\nhighestcoreNumber = 0\n\ntsclient = ctx.getApiClient(tsgr.TagSearchStub)\n\ntvs = tspb.TagValueSearchRequest(label=networkLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    if match.device.device_id == myDeviceID:\n      myPod = tag.value\n\ntvs = tspb.TagValueSearchRequest(label=erNumLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    deviceIDNodeNumDict[match.device.device_id] = tag.value\n    sc = deviceIDSwitchConfigDict.get(match.device.device_id, SwitchConfig())\n    sc.Role = \"er\"\n    sc.NodeNum = int(tag.value)\n    if highesterNumber < sc.NodeNum:\n      highesterNumber = sc.NodeNum\n    deviceIDSwitchConfigDict[match.device.device_id] = sc\n    if match.device.device_id == myDeviceID:\n      myNodeNum = int(tag.value)\n      myRole = \"er\"\n\ntvs = tspb.TagValueSearchRequest(label=coreNumLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    deviceIDNodeNumDict[match.device.device_id] = tag.value\n    sc = deviceIDSwitchConfigDict.get(match.device.device_id, SwitchConfig())\n    sc.Role = \"core\"\n    sc.NodeNum = int(tag.value)\n    if highestcoreNumber < sc.NodeNum:\n      highestcoreNumber = sc.NodeNum\n    deviceIDSwitchConfigDict[match.device.device_id] = sc\n    if match.device.device_id == myDeviceID:\n      myNodeNum = int(tag.value)\n      myRole = \"core\"\n\ntvs = tspb.TagValueSearchRequest(label=dcrrNumLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    deviceIDNodeNumDict[match.device.device_id] = tag.value\n    sc = deviceIDSwitchConfigDict.get(match.device.device_id, SwitchConfig())\n    sc.Role = \"rr\"\n    sc.NodeNum = int(tag.value)\n    if highestrrNumber < sc.NodeNum:\n      highestrrNumber = sc.NodeNum\n    deviceIDSwitchConfigDict[match.device.device_id] = sc\n    if match.device.device_id == myDeviceID:\n      myNodeNum = int(tag.value)\n      myRole = \"rr\"\n\ntvs = tspb.TagValueSearchRequest(label=hostnameLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    sc = deviceIDSwitchConfigDict.get(match.device.device_id, SwitchConfig())\n    sc.Hostname = tag.value\n    deviceIDSwitchConfigDict[match.device.device_id] = sc\n    hostnameDeviceIDDict[tag.value] = match.device.device_id\n    deviceIDHostnameDict[match.device.device_id] = tag.value\n    if match.device.device_id == myDeviceID:\n      myHostname = tag.value\n\ntvs = tspb.TagValueSearchRequest(label=erDomainLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    erDomainList = erDomainToDeviceIDDict.get(tag.value)\n    if erDomainList == None :\n      erDomainList = []\n    erDomainList.append(match.device.device_id)\n    erDomainToDeviceIDDict[tag.value] = erDomainList\n    if match.device.device_id == myDeviceID:\n      myerDomain = tag.value\n\ntvs = tspb.TagValueSearchRequest(label=eosVersionLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    sc = deviceIDSwitchConfigDict.get(match.device.device_id, SwitchConfig())\n    sc.EOSVersion = tag.value\n    deviceIDSwitchConfigDict[match.device.device_id] = sc\n    if match.device.device_id == myDeviceID:\n      myEOSVersion = tag.value\n\ntvs = tspb.TagValueSearchRequest(label=modelLabel, workspace_id=ctx.studio.workspaceId)\ntvsresp = tsclient.GetTagValueSuggestions(tvs)\nfor tag in tvsresp.tags:\n  tagtmr = tspb.TagMatchRequestV2(query=\"%s:%s\" % (tag.label, tag.value), workspace_id=ctx.studio.workspaceId)\n  tagresp = tsclient.GetTagMatchesV2(tagtmr)\n  for match in tagresp.matches:\n    sc = deviceIDSwitchConfigDict.get(match.device.device_id, SwitchConfig())\n    sc.Model = tag.value\n    deviceIDSwitchConfigDict[match.device.device_id] = sc\n    if match.device.device_id == myDeviceID:\n      myModel = tag.value\n\nif not myPod or not myNodeNum:\n    return\n\ndef create_tag(tag_key):\n    '''\n    tag_key is a TagKey\n    '''\n    tcsr = TagConfigSetRequest()\n    tcsr.value.key.workspace_id.value = tag_key.workspace_id.value\n    tcsr.value.key.element_type = tag_key.element_type\n    tcsr.value.key.label.value = tag_key.label.value\n    tcsr.value.key.value.value = tag_key.value.value\n    client = ctx.getApiClient(TagConfigServiceStub)\n    client.Set(tcsr)\n\ndef apply_tag(tag_assignment_key):\n    '''\n    tag_assignment_key is a TagAssignmentKey\n    '''\n    tacsr = TagAssignmentConfigSetRequest()\n    tacsr.value.key.workspace_id.value = tag_assignment_key.workspace_id.value\n    tacsr.value.key.element_type = tag_assignment_key.element_type\n    tacsr.value.key.label.value = tag_assignment_key.label.value\n    tacsr.value.key.value.value = tag_assignment_key.value.value\n    tacsr.value.key.device_id.value = tag_assignment_key.device_id.value\n    tacsr.value.key.interface_id.value = tag_assignment_key.interface_id.value\n    tacsr.value.remove.value = False\n    client = ctx.getApiClient(TagAssignmentConfigServiceStub)\n    client.Set(tacsr)\n\ndef remove_tag(tag_assignment_key):\n    '''\n    tag_assignment_key is a TagAssignmentKey\n    '''\n    tacsr = TagAssignmentConfigSetRequest()\n    tacsr.value.key.workspace_id.value = tag_assignment_key.workspace_id.value\n    tacsr.value.key.element_type = tag_assignment_key.element_type\n    tacsr.value.key.label.value = tag_assignment_key.label.value\n    tacsr.value.key.value.value = tag_assignment_key.value.value\n    tacsr.value.key.device_id.value = tag_assignment_key.device_id.value\n    tacsr.value.key.interface_id.value = tag_assignment_key.interface_id.value\n    tacsr.value.remove.value = True\n    client = ctx.getApiClient(TagAssignmentConfigServiceStub)\n    client.Set(tacsr)\n\ndef get_tag_values_applied_to_device(tag_assignment_key):\n    label = tag_assignment_key.label.value\n    value = tag_assignment_key.value.value\n    device_id = tag_assignment_key.device_id.value\n    workspace_id = tag_assignment_key.workspace_id.value\n    tsclient = ctx.getApiClient(tsgr.TagSearchStub)\n    matching_tags = []\n    tvsr = tspb.TagValueSearchRequest(label=label, workspace_id=workspace_id, topology_studio_request=True)\n    for tag in tsclient.GetTagValueSuggestions(tvsr).tags:\n      if not tag.value:\n        continue\n      query= \"{}:\\\"{}\\\" AND device:{}\".format(tag.label, tag.value, device_id)\n      tagmr = tspb.TagMatchRequestV2(query=query, workspace_id=workspace_id, topology_studio_request=True)\n      tagmresp =  tsclient.GetTagMatchesV2(tagmr)\n      for match in tagmresp.matches:\n        if match.device.device_id == device_id:\n          matching_tags.append(tag)\n    return matching_tags\n\ndef set_bgp_tags(ASN, Lo0):\n        tag_labels = {\"router_bgp.as\": ASN, \"router_bgp.router_id\": Lo0}\n        for label, config_path in tag_labels.items():\n            tag_key = TagKey()\n            tag_key.workspace_id.value = workspace_id=ctx.studio.workspaceId\n            tag_key.element_type = 1\n            tag_key.label.value = label\n            tag_key.value.value = str(config_path)\n            create_tag(tag_key)\n\n            tag_assignment_key = TagAssignmentKey()\n            tag_assignment_key.workspace_id.value = workspace_id=ctx.studio.workspaceId\n            tag_assignment_key.element_type = 1\n            tag_assignment_key.label.value = label\n            tag_assignment_key.value.value = str(config_path)\n            tag_assignment_key.device_id.value = ctx.getDevice().id\n            apply_tag(tag_assignment_key)\n\n            tag_assignment_key = TagAssignmentKey()\n            tag_assignment_key.workspace_id.value = workspace_id=ctx.studio.workspaceId\n            tag_assignment_key.element_type = 1\n            tag_assignment_key.label.value = label\n            tag_assignment_key.device_id.value =  ctx.getDevice().id\n            applied_tags = get_tag_values_applied_to_device(tag_assignment_key)\n            for tag in applied_tags:\n                if tag.value != str(config_path):\n                    tag_assignment_key.value.value = tag.value\n                    remove_tag(tag_assignment_key)\n\n\npodsInputs = pods.resolve()\nigpOSPF = False\nigpIsis = False\nigp = podsInputs[\"pod\"][\"igp\"]\nif igp == \"OSPF\":\n  igpOSPF = True\nif igp == \"ISIS\":\n  igpIsis = True\nredisConnected = False\nredCon = podsInputs[\"pod\"][\"redistributeConnected\"]\nif redCon == \"ENABLED\":\n  redisConnected = True\nredisStatic = False\nredStat = podsInputs[\"pod\"][\"redistributeStatic\"]\nif redStat == \"ENABLED\":\n  redisStatic = True\nvlans = []\nvxlan = False\nevpnEnabled = False\n##evpnEnabled = podsInputs[\"pod\"][\"commonBGPConfig\"][\"evpnEnabled\"]\nevpnVxlan = podsInputs[\"pod\"][\"commonBGPConfig\"][\"evpnAndVxlan\"]\nif evpnVxlan == \"ENABLED\":\n  evpnEnabled = True\n  vxlan = True\nlacpmode = False\nlacp = podsInputs[\"pod\"][\"commonMlagConfig\"][\"lacpMode\"]\nif lacp == \"ACTIVE\":\n  lacpmode = True\n\nerDomains = podsInputs[\"pod\"][\"erDomains\"].resolve()\nfor key in deviceIDSwitchConfigDict:\n  sc = deviceIDSwitchConfigDict[key]\n  if sc.Role == \"rr\":\n    sc.ASN = podsInputs[\"pod\"][\"commonBGPConfig\"][\"rrAS\"]\n    sc.Loopback0IP = podsInputs[\"pod\"][\"rrs\"].resolve(sc.Hostname)[\"rrInterfaceParams\"][\"loopback0Address\"]\n  else :\n    erASN = podsInputs[\"pod\"][\"commonBGPConfig\"][\"rrAS\"]\n    sc.ASN = str(erASN)\n    if sc.Role == \"er\":\n      sc.Loopback0IP = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"loopback0Address\"]\n      if vxlan == True:\n        sc.LogicalVTEP = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"loopback1Address\"]\n    if sc.Role == \"core\":\n      sc.Loopback0IP =  podsInputs[\"pod\"][\"pRouters\"].resolve()[\"pLinkDetails\"][\"loopback0Address\"]\n\n\nrrs = podsInputs[\"pod\"][\"rrs\"].resolve()\nrrInterface = rrs[\"rrInterfaceParams\"][\"rrDownlink\"]\n\nmySC = deviceIDSwitchConfigDict[myDeviceID]\n\nrrBGPDynamicNeighbors = podsInputs[\"pod\"][\"commonBGPConfig\"][\"rrBGPDynamicNeighbors\"]\nasnBGPPeerDict = {}\nmySCList = []\n\nif myRole == \"rr\":\n  isisNet = get_isis_addr(49, 1, podsInputs[\"pod\"][\"rrs\"].resolve()[\"rrInterfaceParams\"][\"loopback0Address\"])\n  if rrInterface:\n    for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = val = rrInterface.resolve(intfName, strict=True)\n      if not val:\n        continue\n      intf = InterfaceConfig()\n      intf.Port = intfName\n      intf.NeighborHostname = val[\"rrNeighborParams\"][\"rrLinkPeer\"]\n      intf.NeighborPort = val[\"rrNeighborParams\"][\"rrLinkPeerInterface\"]\n      neighborDeviceID = hostnameDeviceIDDict[intf.NeighborHostname]\n      neighborNodeNum = deviceIDNodeNumDict.get(neighborDeviceID)\n      assert neighborNodeNum, \"neighbor missing: %s\" % neighborDeviceID\n\n      intf.IPAddress = val[\"rrNeighborParams\"][\"rripAddress\"]\n      intf.Mask = val[\"rrNeighborParams\"][\"rrsubnetMask\"]\n      mySC.Interfaces.append(intf)\n      neighborSC = deviceIDSwitchConfigDict[neighborDeviceID]\n      neighborIntf = InterfaceConfig()\n      neighborIntf.Port = intf.NeighborPort\n      neighborIntf.NeighborPort = intf.Port\n\n      neighborSC.Interfaces.append(neighborIntf)\n      if not rrBGPDynamicNeighbors:\n        scList = asnBGPPeerDict.get(neighborSC.ASN)\n        if scList == None:\n          scList = []\n        scList.append(neighborSC)\n        asnBGPPeerDict[neighborSC.ASN] = scList\n  for key in asnBGPPeerDict :\n    scList = asnBGPPeerDict.get(key)\n    peerGroup = BGPPeerGroup()\n    vpnPeerGroup = BGPPeerGroup()\n    vpnPeerGroup.EVPN  = True\n    peerGroupNum = str(scList[0].NodeNum // 2 + scList[0].NodeNum%2)\n    ers = len(scList)\n    if ers == 2:\n      peerGroup.Name = \"PEPair\" + peerGroupNum\n      vpnPeerGroup.Name = \"PEPair\" + peerGroupNum\n    else:\n      peerGroup.Name = \"PE\" + peerGroupNum\n      vpnPeerGroup.Name = \"PE\" + peerGroupNum\n    peerGroup.NeighborASN = vpnPeerGroup.NeighborASN = key\n    neighborLoopbacks = []\n    neighborIntfs = []\n    for sc in scList :\n      bgpPeerIntf  = NeighborIntf()\n      evpnPeerIntf = NeighborIntf()\n      evpnPeerIntf.Host = sc.Hostname\n      bgpPeerIntf.Host = sc.Hostname\n      evpnPeerIntf.Port = \"Loopback0\"\n      bgpPeerIntf.IPAddress = sc.Interfaces[0].IPAddress\n      evpnPeerIntf.IPAddress = sc.Loopback0IP\n      neighborIntfs.append(bgpPeerIntf)\n      neighborLoopbacks.append(evpnPeerIntf)\n    peerGroup.NeighborIntfs = neighborIntfs\n    vpnPeerGroup.NeighborIntfs = neighborLoopbacks\n    mySC.BGPPeerGroups.append(peerGroup)\n    mySC.BGPPeerGroups.append(vpnPeerGroup)\n\n\nmlagEnabled = False\nmlagSubnetMask = 31\ncommonMlagConfig = podsInputs[\"pod\"][\"commonMlagConfig\"]\n\nif myRole == \"er\":\n  mlag = Mlag()\n  mySC.MlagNetwork = ipaddress.ip_network(commonMlagConfig[\"mlagLinkSubnet\"])\n  mySC.MlagIPAddr = mySC.MlagNetwork[(myNodeNum % 2) - 1]\n  mySC.MlagNetmask = mlagSubnetMask\n  mySC.MlagIPPeerAddr = mySC.MlagNetwork[myNodeNum % 2]\n  mlagIntf1 = InterfaceConfig()\n  mlagIntf2 = InterfaceConfig()\n  if podsInputs[\"pod\"][\"erDomains\"].resolve()[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"erMLAGInterface1\"]:\n    mlagIntf1.Port = podsInputs[\"pod\"][\"erDomains\"].resolve()[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"erMLAGInterface1\"]\n  if podsInputs[\"pod\"][\"erDomains\"].resolve()[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"erMLAGInterface2\"]:\n    mlagIntf2.Port = podsInputs[\"pod\"][\"erDomains\"].resolve()[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"erMLAGInterface2\"]\n  if mlagIntf1.Port != \"\" :\n    mlag.Interfaces.append(mlagIntf1)\n  if mlagIntf2.Port != \"\" :\n    mlag.Interfaces.append(mlagIntf2)\n  if mlagIntf1.Port !=\"\" or mlagIntf2.Port != \"\":\n    mySC.MlagMembers = mlag\n    mlagEnabled = True\n    mlagedDevices = erDomainToDeviceIDDict.get(myerDomain)\n    if mlagedDevices != None and len(mlagedDevices) == 2 :\n      peerDeviceID = \"\"\n      bgpPeerIntf  = NeighborIntf()\n      if mlagedDevices[0] == myDeviceID:\n        peerDeviceID = mlagedDevices[1]\n      elif mlagedDevices[1] == myDeviceID:\n        peerDeviceID = mlagedDevices[0]\n      bgpPeerIntf.Host = deviceIDHostnameDict[peerDeviceID]\n      mySC.MlagPeerName = deviceIDHostnameDict[peerDeviceID]\n      bgpPeerIntf.Port = \"MLAG\"\n      bgpPeerIntf.IPAddress = mySC.MlagIPPeerAddr\n      bgpPeerGroup = BGPPeerGroup()\n      bgpPeerGroup.Name = \"Peer_ER\"\n      bgpPeerGroup.NeighborASN = mySC.ASN\n      bgpPeerGroup.Peerer = True\n      bgpPeerGroup.NeighborIntfs.append(bgpPeerIntf)\n      mySC.BGPPeerGroups.append(bgpPeerGroup)\n  isisNet = get_isis_addr(49, 1, erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"loopback0Address\"])\n\n  if erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"rrHostnames\"]:\n    for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = []\n      for rr in erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"rrHostnames\"]:\n        if intfName == rr.localInterface:\n          val = rr\n      if val:\n        intf = InterfaceConfig()\n        intf.Port = intfName\n        intf.NeighborHostname = val.rrHostname\n        intf.NeighborPort = val.localInterface\n        neighborDeviceID = hostnameDeviceIDDict[intf.NeighborHostname]\n        neighborNodeNum = deviceIDNodeNumDict.get(neighborDeviceID)\n        assert neighborNodeNum, \"rr neighbor missing: %s\" % neighborDeviceID\n\n        intf.IPAddress = val.localIpAddress\n        intf.Mask = val.localSubnetMask\n        mySC.Interfaces.append(intf)\n        neighborSC = deviceIDSwitchConfigDict[neighborDeviceID]\n        neighborIntf = InterfaceConfig()\n        neighborIntf.Port = intf.NeighborPort\n        neighborIntf.NeighborPort = intf.Port\n        neighborIntf.IPNetwork = intf.IPNetwork\n\n        neighborIntf.Mask = fabricSubnetMask\n        neighborSC.Interfaces.append(neighborIntf)\n        scList = asnBGPPeerDict.get(neighborSC.ASN)\n        if scList == None:\n          scList = []\n        scList.append(neighborSC)\n        asnBGPPeerDict[neighborSC.ASN] = scList\n    index = 0\n    for rr in erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"rrHostnames\"]:\n      val = []\n      if rr.localInterface == \"\":\n        port = str(index)\n        rr.localInterface = port\n        val = rr\n        index = index = 1\n      if val:\n        intf = InterfaceConfig()\n        intf.Port = rr.localInterface\n        intf.NeighborHostname = val.rrHostname\n        intf.NeighborPort = val.localInterface\n        neighborDeviceID = hostnameDeviceIDDict[intf.NeighborHostname]\n        neighborNodeNum = deviceIDNodeNumDict.get(neighborDeviceID)\n        assert neighborNodeNum, \"rr neighbor missing: %s\" % neighborDeviceID\n\n        intf.IPAddress = val.localIpAddress\n        intf.Mask = val.localSubnetMask\n        mySC.Interfaces.append(intf)\n        neighborSC = deviceIDSwitchConfigDict[neighborDeviceID]\n        neighborIntf = InterfaceConfig()\n        neighborIntf.Port = intf.NeighborPort\n        neighborIntf.NeighborPort = intf.Port\n        neighborIntf.IPNetwork = intf.IPNetwork\n\n        neighborIntf.Mask = fabricSubnetMask\n        neighborSC.Interfaces.append(neighborIntf)\n        scList = asnBGPPeerDict.get(neighborSC.ASN)\n        if scList == None:\n          scList = []\n        scList.append(neighborSC)\n        asnBGPPeerDict[neighborSC.ASN] = scList\n  pe2peLink = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"erneighbors\"]\n  if pe2peLink:\n    for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = pe2peLink.resolve(intfName, strict=True)\n      if val:\n        intf = InterfaceConfig()\n        intf.Port = intfName\n        intf.NeighborHostname = val[\"erneighborDetails\"][\"erhostName\"]\n        intf.NeighborPort = val[\"erneighborDetails\"][\"erinterface\"]\n        intf.IPAddress = val[\"erneighborDetails\"][\"eripAddress\"]\n        intf.Mask = val[\"erneighborDetails\"][\"ersubnetMask\"]\n        neighborDeviceID = hostnameDeviceIDDict[intf.NeighborHostname]\n        neighborNodeNum = deviceIDNodeNumDict.get(neighborDeviceID)\n        assert neighborNodeNum, \"neighbor missing: %s\" % neighborDeviceID\n        mySC.Interfaces.append(intf)\n\n  staticRoutes = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"staticRoutes\"]\n  for route in staticRoutes:\n    prefix = StaticRoutes()\n    prefix.Prefix = route[\"prefix\"]\n    prefix.NextHop = route[\"nextHop\"]\n    prefix.Name = route[\"name\"]\n    mySC.StaticRoutes.append(prefix)\n\n  prefixList = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"prefixLists\"]\n  for name in prefixList:\n    pl = PrefixLists()\n    pl.Name = name[\"prefixListName\"]\n    pllist = []\n    pllist = name[\"seqNums\"]\n    plName = []\n    for seq in pllist:\n      plname = PLName()\n      plname.SeqNum = seq.seqNum\n      plname.PermitDeny = seq.permitDeny\n      plname.Prefix = seq.prefix\n      plname.PrefixLength = seq.prefixLength\n      plname.MaskLength = seq.maskLength\n      plName.append(plname)\n    pl.PLName = plName  \n    mySC.PrefixLists.append(pl)\n\n  peerGroups = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"peerGroups\"]\n  for name in peerGroups:\n    pg = PeerGroups()\n    pg.PeerGroupName = name[\"peerGroupName\"]\n    pg.PeerASN = name[\"peerAsn\"]\n    pg.Redis = name[\"redistributeRoutes\"]\n    pg.Description = name[\"description\"]\n    pg.LocalAS = name[\"localAs\"]\n    pg.NextHopSelf = name[\"nextHopSelf\"]\n    pg.BFD = name[\"bfd\"]\n    pg.eBGPMultiHopTTL = name[\"eBgpMultiHopTtl\"] \n    pg.MaxAcceptedRoutes = name[\"maximumAcceptedRoutes\"]\n    eBgpNeighbors = []\n    Neighbors = name[\"eBgpNeighbors\"]\n    for neighbor in Neighbors:\n      details = eBGPNeighbors()\n      details.NeighborIp = neighbor[\"neighborIp\"]\n      details.PeerASN = neighbor[\"peerAsn\"]\n      eBgpNeighbors.append(details)\n    pg.eBGPNeighbors = eBgpNeighbors\n    mySC.PeerGroups.append(pg) \n\n    routeMapIn = []\n    routeMapIn = name[\"routeMapIn\"]\n    rmIn = []\n    for seq in routeMapIn:\n      rmi = RouteMapIn()\n      rmi.SeqNum = seq.seqNum\n      rmi.PermitDeny = seq.permitDeny\n      rmi.PrefixListIn = seq.prefixList\n      rmi.MatchCommunity = seq.matchCommunity\n      rmi.SetCommunity = seq.setCommunity\n      rmi.LocalPref = seq.localPref\n      rmi.PrependRepeat = seq.asPathPrependRepeat      \n      rmIn.append(rmi)\n    pg.RouteMapIn = rmIn \n    mySC.PeerGroups.append(pg)  \n    routeMapOut = []\n    routeMapOut = name[\"routeMapOut\"]\n    rmOut = []\n    for seq in routeMapOut:\n      rmo = RouteMapOut()\n      rmo.SeqNum = seq.seqNum\n      rmo.PermitDeny = seq.permitDeny\n      rmo.PrefixListOut = seq.prefixList\n      rmo.MatchCommunity = seq.matchCommunity\n      rmo.SetCommunity = seq.setCommunity\n      rmo.PrependRepeat = seq.asPathPrependRepeat\n      rmOut.append(rmo)\n    pg.RouteMapOut = rmOut\n    mySC.PeerGroups.append(pg)\n\n  p2peLink = podsInputs[\"pod\"][\"pRouters\"].resolve()[\"pLinkDetails\"][\"pneighbor\"]\n  if p2peLink :\n    for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = p2peLink.resolve(intfName, strict=True)\n      if val:\n        intf = InterfaceConfig()\n        intf.Port = intfName\n        intf.NeighborHostname = val[\"pneighborDetails\"][\"phostName\"]\n\n  externalInterfaces = erDomains[\"erDomain\"][\"erDetails\"].resolve()[\"erLinkDetails\"][\"externalInterfaces\"]\n  if externalInterfaces:\n     for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = externalInterfaces.resolve(intfName, strict=True)\n      if val:\n        details = ExternalInterfaces()\n        details.InterfaceName = intfName\n        details.Description = val[\"externalInterfaceGroup\"][\"description\"]\n        details.IPPrefix = val[\"externalInterfaceGroup\"][\"ipPrefix\"]\n        details.VlanID = val[\"externalInterfaceGroup\"][\"vlanId\"]\n        mySC.ExternalInterfaces.append(details)\n    \n  for key in asnBGPPeerDict :\n    scList = asnBGPPeerDict.get(key)\n    peerGroup = BGPPeerGroup()\n    vpnPeerGroup = BGPPeerGroup()\n    vpnPeerGroup.EVPN  = True\n    peerGroup.Name = \"RR\"\n    vpnPeerGroup.Name = \"RR\"\n    peerGroup.NeighborASN = key\n    vpnPeerGroup.NeighborASN = key\n    neighborLoopbacks = []\n    neighborIntfs = []\n    for sc in scList :\n      bgpPeerIntf  = NeighborIntf()\n      evpnPeerIntf = NeighborIntf()\n      evpnPeerIntf.Host = sc.Hostname\n      bgpPeerIntf.Host = sc.Hostname\n      bgpPeerIntf.Port = sc.Interfaces[0].Port\n      evpnPeerIntf.Port = \"Loopback0\"\n      bgpPeerIntf.IPAddress = sc.Interfaces[0].IPAddress\n      evpnPeerIntf.IPAddress = sc.Loopback0IP\n      neighborIntfs.append(bgpPeerIntf)\n      neighborLoopbacks.append(evpnPeerIntf)\n    peerGroup.NeighborIntfs = neighborIntfs\n    vpnPeerGroup.NeighborIntfs = neighborLoopbacks\n    mySC.BGPPeerGroups.append(peerGroup)\n    mySC.BGPPeerGroups.append(vpnPeerGroup)\n\nif myRole == \"core\":\n  isisNet = get_isis_addr(49, 1, podsInputs[\"pod\"][\"pRouters\"].resolve()[\"pLinkDetails\"][\"loopback0Address\"])\n  p2rrInterface = podsInputs[\"pod\"][\"pRouters\"].resolve()[\"pLinkDetails\"][\"rRs\"]\n  if p2rrInterface:\n    for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = p2rrInterface.resolve(intfName, strict=True)\n      if val:\n        intf = InterfaceConfig()\n        intf.Port = intfName\n        intf.NeighborHostname = val[\"prrDetails\"][\"prrhostName\"]\n        intf.NeighborPort = val[\"prrDetails\"][\"prrinterface\"]\n        neighborDeviceID = hostnameDeviceIDDict[intf.NeighborHostname]\n        neighborNodeNum = deviceIDNodeNumDict.get(neighborDeviceID)\n        assert neighborNodeNum, \"rr neighbor missing: %s\" % neighborDeviceID\n\n        intf.IPAddress = val[\"prrDetails\"][\"prripAddress\"]\n        intf.Mask = val[\"prrDetails\"][\"prrsubnetMask\"]\n        mySC.Interfaces.append(intf)\n        neighborSC = deviceIDSwitchConfigDict[neighborDeviceID]\n        neighborIntf = InterfaceConfig()\n        neighborIntf.Port = intf.NeighborPort\n        neighborIntf.NeighborPort = intf.Port\n        neighborIntf.IPNetwork = intf.IPNetwork\n\n        neighborSC.Interfaces.append(neighborIntf)\n        scList = asnBGPPeerDict.get(neighborSC.ASN)\n        if scList == None:\n          scList = []\n        scList.append(neighborSC)\n        asnBGPPeerDict[neighborSC.ASN] = scList\n  p2peLink = podsInputs[\"pod\"][\"pRouters\"].resolve()[\"pLinkDetails\"][\"pneighbor\"]\n  if p2peLink :\n    for intf in myDevice.getInterfaces():\n      intfName = intf.name\n      val = p2peLink.resolve(intfName, strict=True)\n      if val:\n        intf = InterfaceConfig()\n        intf.Port = intfName\n        intf.NeighborHostname = val[\"pneighborDetails\"][\"phostName\"]\n        intf.NeighborPort = val[\"pneighborDetails\"][\"pinterface\"]\n        intf.IPAddress = val[\"pneighborDetails\"][\"pipAddress\"]\n        intf.Mask = val[\"pneighborDetails\"][\"psubnetMask\"]\n        neighborDeviceID = hostnameDeviceIDDict[intf.NeighborHostname]\n        neighborNodeNum = deviceIDNodeNumDict.get(neighborDeviceID)\n        assert neighborNodeNum, \"core neighbor missing: %s\" % neighborDeviceID\n        mySC.Interfaces.append(intf)\n  for key in asnBGPPeerDict :\n    scList = asnBGPPeerDict.get(key)\n    peerGroup = BGPPeerGroup()\n    vpnPeerGroup = BGPPeerGroup()\n    vpnPeerGroup.EVPN  = True\n    peerGroup.Name = \"RR\"\n    vpnPeerGroup.Name = \"RR\"\n    peerGroup.NeighborASN = key\n    vpnPeerGroup.NeighborASN = key\n    neighborLoopbacks = []\n    neighborIntfs = []\n    for sc in scList :\n      bgpPeerIntf  = NeighborIntf()\n      evpnPeerIntf = NeighborIntf()\n      evpnPeerIntf.Host = sc.Hostname\n      bgpPeerIntf.Host = sc.Hostname\n      bgpPeerIntf.Port = sc.Interfaces[0].Port\n      evpnPeerIntf.Port = \"Loopback0\"\n      bgpPeerIntf.IPAddress = sc.Interfaces[0].IPAddress\n      evpnPeerIntf.IPAddress = sc.Loopback0IP\n      neighborIntfs.append(bgpPeerIntf)\n      neighborLoopbacks.append(evpnPeerIntf)\n    peerGroup.NeighborIntfs = neighborIntfs\n    vpnPeerGroup.NeighborIntfs = neighborLoopbacks\n    mySC.BGPPeerGroups.append(peerGroup)\n    mySC.BGPPeerGroups.append(vpnPeerGroup)\n\n\ninternalVlan = commonMlagConfig[\"internalVlan\"]\nmlagPortChannelId = commonMlagConfig[\"mlagPortChannelId\"]\nvirtualRouterMac = commonMlagConfig[\"virtualRouterMac\"]\nif mySC.ASN:\n  if mySC.Loopback0IP:\n    set_bgp_tags(mySC.ASN, mySC.Loopback0IP)\n%>\n\n%if evpnEnabled:\nservice routing protocols model multi-agent\n%endif\n!\n!-- Fabric interfaces --!\n%for intf in mySC.Interfaces:\n%  if  intf.Port != \"0\":\n%  if  intf.Port != \"1\":\n%  if  intf.Port != \"2\":\n%  if  intf.Port != \"3\":\ninterface ${intf.Port}\n  description To ${intf.NeighborHostname}-${intf.NeighborPort}\n%    if mySC.Model != \"vEOS\" and mySC.Model != \"vEOS-lab\":\n%      if mySC.Model != \"cEOSLab\":\n  mtu 9214\n%      endif\n%    endif\n\n  no switchport\n  ip address ${intf.IPAddress}/${intf.Mask}\n%    if igpOSPF:\n  ip ospf network point-to-point\n  ip ospf area 0\n%      if ospfAuthKey:\n  ip ospf authentication message-digest\n  ip ospf message-digest-key 1 md5 7 ${ospfAuthKey}\n%      endif\n%    endif\n%    if igpIsis:\n  isis enable 1\n  isis network point-to-point\n  !\n%    endif\n!\n%  endif\n%  endif\n%  endif\n%  endif\n%endfor\n${igpConfig()}\n%if myRole == \"er\":\n  %if mlagEnabled:\n${mlagConfig()}\n  %endif\n!\n${eriBGPConfig()}\n!\n${StaticRouteConfig()}\n${PrefixListConfig()}\n${RouteMapConfig()}\n${eBGPNeighborsConfig()}\n${externalInterfacesConfig()}\n%endif\n%if myRole == \"rr\":\n${rriBGPConfig()}\n%endif\n\n!-- MLAG Section --!\n<%def name=\"mlagConfig()\">\nno spanning-tree vlan-id ${internalVlan}\n%for mlag in mySC.MlagMembers.Interfaces:\ninterface ${mlag.Port}\n  description MLAG-PEER-LINK to ${mySC.MlagPeerName}\n%  if lacpmode == False:\n  channel-group ${mlagPortChannelId} mode on\n%  else:\n  channel-group ${mlagPortChannelId} mode active\n%  endif\n!\n%endfor\n!-- MLAG configuration --!\ninterface Port-Channel ${mlagPortChannelId}\n  description MLAG-PEER-LINK\n  switchport\n  switchport mode trunk\n  switchport trunk group MLAG-PEER\n!\ninterface Vlan ${internalVlan}\n  description MLAG to ${mySC.MlagPeerName}\n  no autostate\n  ip address ${mySC.MlagIPAddr}/${mySC.MlagNetmask}\n%if mySC.Model != \"vEOS\" and mySC.Model != \"vEOS-lab\":\n%  if mySC.Model != \"cEOSLab\":\n  mtu 9214\n%  endif\n%endif\n%if igpOSPF:\n  ip ospf network point-to-point\n  ip ospf area 0\n%endif\n%if igpIsis:\n  isis enable 1\n  isis network point-to-point\n  !\n%endif\n!\nvlan ${internalVlan}\n  name MLAG-PEER-VLAN\n  trunk group MLAG-PEER\n!\nmlag configuration\n  domain-id MLAG\n  local-interface Vlan${internalVlan}\n  peer-address ${mySC.MlagIPPeerAddr}\n  peer-link Port-Channel${mlagPortChannelId}\n  reload-delay mlag 300\n  reload-delay non-mlag 360\n!\n</%def>\n\n!-- IGP Section --!\n\n<%def name=\"igpConfig()\">\n%if mySC.Loopback0IP:\ninterface Loopback0\n  description Router ID\n  ip address ${mySC.Loopback0IP}/32\n%  if igpOSPF:\n  ip ospf area 0\n%  endif\n%  if igpIsis:\n  !\n  isis enable 1\n  isis passive\n  !\n%  endif\n!\n%endif\nip routing\n!\n%if igpOSPF:\nrouter ospf 1\n%  if mySC.Loopback0IP:\nrouter-id ${mySC.Loopback0IP}\n%  endif\nbfd default\n%  if redisConnected:\nredistribute connected\n%  endif\n%  if redisStatic:\nredistribute static\n%  endif\n%endif\n%if igpIsis:\n%  if isisNet != \"49.0001.000...00\":\nrouter isis 1\n   net ${isisNet}\n   is-type level-2\n   advertise passive-only\n%    if redisConnected:\n     redistribute connected\n%    endif\n%    if redisStatic:\n     redistribute static\n%    endif\n   address-family ipv4 unicast\n   bfd all-interfaces\n   !\n!\n%  endif\n%endif\n</%def>\n\n!-- BGP Section --!\n\n<%def name=\"eriBGPConfig()\">\n!-- BGP EVPN configuration\n%if vxlan:\ninterface vxlan 1\n  vxlan source-interface Loopback1\n  vxlan udp-port 4789\n%  if mlagEnabled:\n  vxlan virtual-router encapsulation mac-address mlag-system-id\n%  endif\n!\n%  if mySC.LogicalVTEP:\ninterface Loopback1\n  description VXLAN Tunnel Source\n  ip address ${mySC.LogicalVTEP}/32\n%    if igpOSPF:\n  ip ospf area 0\n%    endif\n%    if igpIsis:\n  !\n  isis enable 1\n  isis passive\n  !\n%    endif\n!\n%  endif\n%endif\n\n!\n%if evpnEnabled:\nrouter bgp ${mySC.ASN}\n%  if mySC.Loopback0IP:\n  router-id ${mySC.Loopback0IP}\n%  endif\n  maximum-paths 4 ecmp 4\n%  if mySC.Model != \"vEOS\" and mySC.Model != \"vEOS-lab\":\n%    if mySC.Model != \"cEOSLab\":\n  update wait-for-convergence\n  update wait-install\n%    endif\n%  endif\n%  for peerGroup in mySC.BGPPeerGroups:\n%    if peerGroup.EVPN:\n%      if evpnEnabled:\n  neighbor ${peerGroup.Name} peer group\n  neighbor ${peerGroup.Name} remote-as ${peerGroup.NeighborASN }\n  neighbor ${peerGroup.Name} update-source Loopback0\n  neighbor ${peerGroup.Name} send-community extended\n  neighbor ${peerGroup.Name} maximum-routes  0 warning-limit 12000\n%      endif\n%    endif\n%  endfor\n%  for peerGroup in mySC.BGPPeerGroups:\n%    for intf in peerGroup.NeighborIntfs:\n%      if peerGroup.EVPN:\n      neighbor ${intf.IPAddress} peer group ${peerGroup.Name}\n      neighbor ${intf.IPAddress} description ${intf.Host}\n%      endif\n\n%    endfor\n%  endfor\n%  if evpnEnabled:\n  address-family evpn\n%    for peerGroup in mySC.BGPPeerGroups:\n%      if peerGroup.EVPN:\n    neighbor ${peerGroup.Name} activate\n  !\n%      endif\n%    endfor\n  address-family ipv4\n%    for peerGroup in mySC.BGPPeerGroups:\n%      if peerGroup.EVPN:\n    no neighbor ${peerGroup.Name} activate\n  !\n%      endif\n%    endfor\n%  endif\n%endif\n</%def>\n\n<%def name=\"rriBGPConfig()\">\n!-- BGP EVPN configuration\n!\n%if evpnEnabled:\n%  if rrBGPDynamicNeighbors:\npeer-filter PE-AS-Range\n  10 match as-range 1-65535 result accept\n!\nrouter bgp ${mySC.ASN}\n%    if mySC.Loopback0IP:\n  router-id ${mySC.Loopback0IP}\n  bgp cluster-id ${mySC.Loopback0IP}\n%    endif\n%    if mySC.Model != \"vEOS\" and mySC.Model != \"vEOS-lab\":\n%      if mySC.Model != \"cEOSLab\":\n  update wait-for-convergence\n  update wait-install\n%      endif\n%    endif\n\n  bgp log-neighbor-changes\n%    if evpnEnabled:\n  neighbor iBGP peer group\n  neighbor iBGP send-community extended\n  neighbor iBGP maximum-routes 0 warning-limit 12000\n  neighbor iBGP update-source Loopback0\n  neighbor iBGP route-reflector-client\n  bgp route-reflector preserve-attributes always\n%    endif\n%    if evpnEnabled:\n  bgp listen range 0.0.0.0/0 peer-group iBGP-PE peer-filter pe-AS-Range\n%    endif\n%    if evpnEnabled:\n  address-family evpn\n    neighbor iBGP-PE activate\n    next-hop resolution disabled\n  !\n  address-family ipv4\n    no neighbor iBGP activate\n  !\n%    endif\n%  else:\nrouter bgp ${mySC.ASN}\n  router-id ${mySC.Loopback0IP}\n%    if  evpnEnabled:\n  neighbor iBGP peer group\n  neighbor iBGP route-reflector-client\n  neighbor iBGP update-source Loopback0\n  neighbor iBGP send-community extended\n  neighbor iBGP maximum-routes 0 warning-limit 12000\n%    endif\n%    for peerGroup in mySC.BGPPeerGroups:\n%      if peerGroup.EVPN:\n%        if evpnEnabled:\n  neighbor iBGP-PE remote-as ${peerGroup.NeighborASN}\n%          for intf in peerGroup.NeighborIntfs:\n  neighbor ${intf.IPAddress} peer group iBGP-PE\n%          endfor\n%        endif\n%      endif\n%    endfor\n%    if evpnEnabled:\n  address-family evpn\n    neighbor iBGP activate\n        next-hop resolution disabled\n  !\n  address-family ipv4\n    no neighbor iBGP activate\n  !\n%    endif\n%  endif\n%endif\n!\n</%def>\n## ----- Static Routes -----##\n<%def name=\"StaticRouteConfig()\">\n% for prefix in mySC.StaticRoutes:\nip route ${prefix.Prefix} ${prefix.NextHop} name ${prefix.Name} \n%endfor\n!\n</%def>\n## ---- PREFIX LISTS --------##\n<%def name=\"PrefixListConfig()\">\n%for name in mySC.PrefixLists:\nip prefix-list ${ name.Name }\n%  for seq in name.PLName:\nseq ${seq.SeqNum} ${ seq.PermitDeny } ${ seq.Prefix } ${ seq.PrefixLength} ${ seq.MaskLength} \n%  endfor\n!\n%endfor\n!\n</%def>\n## ---- ROUTE MAP --------##\n<%def name=\"RouteMapConfig()\">\n%for peergroup in mySC.PeerGroups:\n%  if peergroup.RouteMapIn:\n%    for routemapi in peergroup.RouteMapIn:\nroute-map  ${ peergroup.PeerGroupName }-in ${ routemapi.PermitDeny } ${ routemapi.SeqNum }\n%       if routemapi.PrefixListIn:\nmatch ip address prefix-list ${ routemapi.PrefixListIn}\n%       endif\n%       if routemapi.MatchCommunity:\nmatch community ${ routemapi.MatchCommunity}\n%       endif\n%       if routemapi.SetCommunity:\nset community ${ routemapi.SetCommunity}\n%       endif\n%       if routemapi.LocalPref:\nset local-preference ${ routemapi.LocalPref}\n%       endif\n%       if routemapi.PrependRepeat:\nset as-path prepend auto repeat ${ routemapi.PrependRepeat }\n%       endif\n!\n%     endfor\n%   endif\n%   if peergroup.RouteMapOut:\n%     for routemapo in peergroup.RouteMapOut:\nroute-map  ${ peergroup.PeerGroupName }-out ${ routemapo.PermitDeny} ${ routemapo.SeqNum}\n%       if routemapo.PrefixListOut:\nmatch ip address prefix-list ${ routemapo.PrefixListOut }\n%       endif\n%       if routemapo.MatchCommunity:\nmatch community ${ routemapo.MatchCommunity}\n%       endif\n%       if routemapo.SetCommunity:\nset community ${ routemapo.SetCommunity}\n%       endif\n%       if routemapo.PrependRepeat:\nset as-path prepend auto repeat ${ routemapo.PrependRepeat }\n%       endif\n!\n%     endfor\n%   endif\n% endfor\n!\n</%def>\n## ---- EXTERNAL BGP NEIGHBORS --------##\n<%def name=\"eBGPNeighborsConfig()\">\n\n%if mySC.PeerGroups or mySC.eBGPNeighbors:\nrouter bgp ${mySC.ASN}\n<% redistribute = False %>\n%  for peer_group in mySC.PeerGroups:\n%    if peer_group.Description:\nneighbor ${ peer_group.PeerGroupName } description ${ peer_group.Description }\n%    endif\nneighbor ${ peer_group.PeerGroupName } peer group\n%    if peer_group.PeerASN:\nneighbor ${ peer_group.PeerGroupName } remote-as ${ peer_group.PeerASN }\n%    endif\n%    if peer_group.LocalAS:\nneighbor ${ peer_group.PeerGroupName } local-as ${ peer_group.LocalAS } no-prepend replace-as\n%    endif\n%    if peer_group.NextHopSelf == \"ENABLED\":\nneighbor ${ peer_group.PeerGroupName } next-hop-self\n%    endif\n%    if peer_group.BFD == \"ENABLED\":\nneighbor ${ peer_group.PeerGroupName }  bfd\n%    endif\n%    if peer_group.eBGPMultiHopTTL:\nneighbor ${ peer_group.PeerGroupName } ebgp-multihop ${ peer_group.eBGPMultiHopTTL }\n%    endif\nneighbor ${ peer_group.PeerGroupName } send-community\n%    if peer_group.MaxAcceptedRoutes:\nneighbor ${ peer_group.PeerGroupName } maximum-accepted-routes ${ peer_group.MaxAcceptedRoutes  }\n%    endif\n%    if peer_group.RouteMapIn:\nneighbor ${ peer_group.PeerGroupName } route-map ${ peer_group.PeerGroupName }-in  in\n%    endif\n%    if peer_group.RouteMapOut:\nneighbor ${ peer_group.PeerGroupName } route-map ${ peer_group.PeerGroupName }-out  out\n%    endif\n%    if peer_group.eBGPNeighbors:\n%      for neighbor in peer_group.eBGPNeighbors:\nneighbor ${ neighbor.NeighborIp } peer group ${ peer_group.PeerGroupName }\n%        if neighbor.PeerASN:\nneighbor ${ neighbor.NeighborIp } remote-as ${ neighbor.PeerASN }\n%        endif\n%      endfor\n%    endif\n%    if peer_group.Redis == \"ENABLED\":\n<% redistribute = True %>\n%    endif\n%  endfor\n%  if redistribute == True:\n%    if igpOSPF:\nredistribute ospf\n!\nrouter ospf 1\nredistribute bgp\n%    endif\n%    if igpISIS:\nredistribute isis\n!\nrouter isis 1\nredistribute bgp\n%    endif\n%  endif\n%endif\n\n</%def>\n## ---- EXTERNAL INTERFACES --------##\n<%def name=\"externalInterfacesConfig()\">\n\n%if mySC.ExternalInterfaces:\n%  for interface in mySC.ExternalInterfaces:\n%    if interface.VlanID:\ninterface ${interface.InterfaceName}\n    no switchport\n    interface ${interface.InterfaceName}.${interface.VlanID}\n    encapsulation dot1q vlan ${interface.VlanID}\n    description ${interface.Description}\n    ip address ${interface.IPPrefix}\n%    else:\ninterface ${ interface.InterfaceName}\n    no switchport\n    description ${interface.Description}\n    ip address ${interface.IPPrefix}\n%    endif\n!\n%   endfor\n% endif\n</%def>\n"
            input_schema:
                fields:
                    values:
                        mlagLinkSubnet:
                            id: mlagLinkSubnet
                            name: mlagLinkSubnet
                            label: 'Subnet of the MLAG peer link'
                            description: 'IP Subnet of the MLAG peer link'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: 169.254.0.0/31
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        internalVlan:
                            id: internalVlan
                            name: internalVlan
                            label: 'VLAN to use for the MLAG peer link'
                            description: 'VLAN to use for the MLAG peer link'
                            required: false
                            type: INPUT_FIELD_TYPE_INTEGER
                            integer_props:
                                default_value: '4094'
                                range: null
                                static_options: null
                                dynamic_options: null
                        mlagPortChannelId:
                            id: mlagPortChannelId
                            name: mlagPortChannelId
                            label: 'MLAG Port-Channel ID'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_INTEGER
                            integer_props:
                                default_value: '2000'
                                range: null
                                static_options: null
                                dynamic_options: null
                        virtualRouterMac:
                            id: virtualRouterMac
                            name: virtualRouterMac
                            label: 'Virtual Router MAC'
                            description: 'Virtual MAC for other hosts or switches to connect to for redundancy'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: '00:1c:73:00:00:99'
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        lacpMode:
                            id: lacpMode
                            name: lacpMode
                            label: 'LACP Mode'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: ACTIVE
                                static_options:
                                    values:
                                        - ACTIVE
                                        - ON
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        commonMlagConfig:
                            id: commonMlagConfig
                            name: commonMlagConfig
                            label: 'Global MLAG Configuration'
                            description: 'This configuration is only used when the MLAG Interface field is populated for the devices in a Edge-Router-Domain. To use MLAG between 2 Edge Routers in the same Edge Router Domain the Edge-Router-Number tag must be consecutive odd and even numbers.'
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - mlagLinkSubnet
                                        - internalVlan
                                        - mlagPortChannelId
                                        - virtualRouterMac
                                        - lacpMode
                        rrAS:
                            id: rrAS
                            name: rrAS
                            label: ASN
                            description: 'Required for EVPN and eBGP'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrBGPDynamicNeighbors:
                            id: rrBGPDynamicNeighbors
                            name: rrBGPDynamicNeighbors
                            label: 'RR BGP Dynamic Neighbors'
                            description: 'Only YES is currently supported'
                            required: false
                            type: INPUT_FIELD_TYPE_BOOLEAN
                            boolean_props:
                                default_value: true
                        evpnAndVxlan:
                            id: evpnAndVxlan
                            name: evpnAndVxlan
                            label: 'EVPN and VXLAN'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: NOT-ENABLED
                                static_options:
                                    values:
                                        - NOT-ENABLED
                                        - ENABLED
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        commonBGPConfig:
                            id: commonBGPConfig
                            name: commonBGPConfig
                            label: 'Global BGP'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - rrAS
                                        - rrBGPDynamicNeighbors
                                        - evpnAndVxlan
                        rrLinkPeer:
                            id: rrLinkPeer
                            name: rrLinkPeer
                            label: 'Neighbor Hostname'
                            description: 'Hostname of the P or PE Router directly connected to this RR'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrLinkPeerInterface:
                            id: rrLinkPeerInterface
                            name: rrLinkPeerInterface
                            label: 'Neighbor Interface'
                            description: 'This field is only used for interface descriptions'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rripAddress:
                            id: rripAddress
                            name: rripAddress
                            label: 'Local IP Address'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rsubnetMask:
                            id: rsubnetMask
                            name: rrsubnetMask
                            label: 'Local Subnet Mask'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: '31'
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrNeighborParams:
                            id: rrNeighborParams
                            name: rrNeighborParams
                            label: 'Neighbor Parameters'
                            description: null
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - rrLinkPeer
                                        - rrLinkPeerInterface
                                        - rripAddress
                                        - rsubnetMask
                        rrDownlink:
                            id: rrDownlink
                            name: rrDownlink
                            label: 'Route Reflector Downlink Interface'
                            description: 'To directly connected routers'
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: rrNeighborParams
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_INTERFACE_TAG
                                input_tag_label: interface
                                tag_filter_query: null
                        loopback0Address:
                            id: loopback0Address
                            name: loopback0Address
                            label: 'Loopback0 Address'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrInterfaceParams:
                            id: rrInterfaceParams
                            name: rrInterfaceParams
                            label: 'Fabric link Interface Parameters'
                            description: null
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - rrDownlink
                                        - loopback0Address
                        rrs:
                            id: rrs
                            name: rrs
                            label: 'Route Reflector Devices'
                            description: 'Used for overlay networks'
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: rrInterfaceParams
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_DEVICE_TAG
                                input_tag_label: device
                                tag_filter_query: null
                        peMLAGInterface1:
                            id: peMLAGInterface1
                            name: erMLAGInterface1
                            label: 'MLAG Interface #1'
                            description: 'Populating these fields enables MLAG. ISIS or OSPF between the MLAG peers will also be configured.'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peMLAGInterface2:
                            id: peMLAGInterface2
                            name: erMLAGInterface2
                            label: 'MLAG Interface#2'
                            description: 'Populating these fields enables MLAG'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        pehostName:
                            id: pehostName
                            name: erhostName
                            label: 'Neighbor Host Name'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peinterface:
                            id: peinterface
                            name: erinterface
                            label: 'Neighbors''s Interface'
                            description: 'This field is only used for interface descriptions'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peipAddress:
                            id: peipAddress
                            name: eripAddress
                            label: 'Local IP Address'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        pesubnetMask:
                            id: pesubnetMask
                            name: ersubnetMask
                            label: 'Subnet Mask'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: '31'
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peneighborDetails:
                            id: peneighborDetails
                            name: erneighborDetails
                            label: 'Neighbor Details'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - pehostName
                                        - peinterface
                                        - peipAddress
                                        - pesubnetMask
                        peneighbors:
                            id: peneighbors
                            name: erneighbors
                            label: Neighbors
                            description: 'Add Interface details if a Edge or Core router is directly connected'
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: peneighborDetails
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_INTERFACE_TAG
                                input_tag_label: interface
                                tag_filter_query: null
                        peloopback0Address:
                            id: peloopback0Address
                            name: loopback0Address
                            label: 'Loopback0 Address'
                            description: 'For overlay routing and Mgmt.'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        loopback1Address:
                            id: loopback1Address
                            name: loopback1Address
                            label: 'Loopback1 Address'
                            description: 'VXLAN VTEP '
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrHostname:
                            id: rrHostname
                            name: rrHostname
                            label: 'RR Hostname'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrInterface:
                            id: rrInterface
                            name: rrInterface
                            label: 'RR Interface'
                            description: 'Interface description if directly to RR'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        localInterface:
                            id: localInterface
                            name: localInterface
                            label: 'Local Interface'
                            description: 'optional: used only if directly to RR'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        localIpAddress:
                            id: localIpAddress
                            name: localIpAddress
                            label: 'Local IP  Address'
                            description: 'optional: used only if directly to RR'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        localSubnetMask:
                            id: localSubnetMask
                            name: localSubnetMask
                            label: 'Local Subnet Mask'
                            description: 'optional: used only if directly to RR'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: '31'
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        rrHostnameGroup:
                            id: rrHostnameGroup
                            name: rrHostnameGroup
                            label: 'RR Hostname Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - rrHostname
                                        - rrInterface
                                        - localInterface
                                        - localIpAddress
                                        - localSubnetMask
                        rrHostnames:
                            id: rrHostnames
                            name: rrHostnames
                            label: 'Route Reflector Hostnames'
                            description: 'Only RR hostname required unless the RR is directly connected'
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: rrHostnameGroup
                                key: rrHostname
                        staticprefix:
                            id: staticprefix
                            name: prefix
                            label: Prefix
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        staticnextHop:
                            id: staticnextHop
                            name: nextHop
                            label: 'Next Hop'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        staticname:
                            id: staticname
                            name: name
                            label: Name
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        staticRouteGroup:
                            id: staticRouteGroup
                            name: staticRouteGroup
                            label: 'Static Route Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - staticprefix
                                        - staticnextHop
                                        - staticname
                        staticRoutes:
                            id: staticRoutes
                            name: staticRoutes
                            label: 'Static Routes'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: staticRouteGroup
                                key: staticprefix
                        prefixListsprefixListName:
                            id: prefixListsprefixListName
                            name: prefixListName
                            label: 'Prefix List Name'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prefixListsseqNum:
                            id: prefixListsseqNum
                            name: seqNum
                            label: 'Seq Num'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prefixListsseqprefix:
                            id: prefixListsseqprefix
                            name: prefix
                            label: Prefix
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prefixListsseqprefixLength:
                            id: prefixListsseqprefixLength
                            name: prefixLength
                            label: Match
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options:
                                    values:
                                        - eq
                                        - ge
                                        - le
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prefixListsseqmaskLength:
                            id: prefixListsseqmaskLength
                            name: maskLength
                            label: 'Mask Length'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prefixListsseqpermitDeny:
                            id: prefixListsseqpermitDeny
                            name: permitDeny
                            label: 'Permit Deny'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: permit
                                static_options:
                                    values:
                                        - permit
                                        - deny
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prefixListsseqNumsvalue:
                            id: prefixListsseqNumsvalue
                            name: value
                            label: 'Seq Num Group'
                            description: 'Group of members for Seq Num'
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - prefixListsseqNum
                                        - prefixListsseqprefix
                                        - prefixListsseqprefixLength
                                        - prefixListsseqmaskLength
                                        - prefixListsseqpermitDeny
                        prefixListsseqNums:
                            id: prefixListsseqNums
                            name: seqNums
                            label: 'Seq Num'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: prefixListsseqNumsvalue
                                key: prefixListsseqNum
                        prefixListsvalue:
                            id: prefixListsvalue
                            name: value
                            label: 'Prefix Lists Group'
                            description: 'Group of members for Prefix Lists'
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - prefixListsprefixListName
                                        - prefixListsseqNums
                        prefixLists:
                            id: prefixLists
                            name: prefixLists
                            label: 'Prefix Lists'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: prefixListsvalue
                                key: prefixListsprefixListName
                        peerGroupName:
                            id: peerGroupName
                            name: peerGroupName
                            label: 'Peer Group Name'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouppeerAsn:
                            id: peerGrouppeerAsn
                            name: peerAsn
                            label: 'Peer ASN'
                            description: 'Applies to all neighbors'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGroupdescription:
                            id: peerGroupdescription
                            name: description
                            label: Description
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouplocalAs:
                            id: peerGrouplocalAs
                            name: localAs
                            label: 'Local AS'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGroupnextHopSelf:
                            id: peerGroupnextHopSelf
                            name: nextHopSelf
                            label: 'Next Hop Self'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: NOT-ENABLED
                                static_options:
                                    values:
                                        - NOT-ENABLED
                                        - ENABLED
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGroupmaximumAcceptedRoutes:
                            id: peerGroupmaximumAcceptedRoutes
                            name: maximumAcceptedRoutes
                            label: 'Maximum Accepted Routes'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGroupeBgpMultiHopTtl:
                            id: peerGroupeBgpMultiHopTtl
                            name: eBgpMultiHopTtl
                            label: 'eBGP Multi Hop TTL'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGroupbfd:
                            id: peerGroupbfd
                            name: bfd
                            label: BFD
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: NOT-ENABLED
                                static_options:
                                    values:
                                        - NOT-ENABLED
                                        - ENABLED
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapInseqNum:
                            id: peerGrouprouteMapInseqNum
                            name: seqNum
                            label: 'Seq Num'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapIdescription:
                            id: peerGrouprouteMapIdescription
                            name: description
                            label: Description
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapIpermitDeny:
                            id: peerGrouprouteMapIpermitDeny
                            name: permitDeny
                            label: 'Permit Deny'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: permit
                                static_options:
                                    values:
                                        - permit
                                        - deny
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapIprefixList:
                            id: peerGrouprouteMapIprefixList
                            name: prefixList
                            label: 'Prefix List'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options:
                                    values:
                                        - '{"fieldId":"prefixListsprefixListName"}'
                        peerGrouprouteMapInmatchCommunity:
                            id: peerGrouprouteMapInmatchCommunity
                            name: matchCommunity
                            label: 'Match Community'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapInsetCommunity:
                            id: peerGrouprouteMapInsetCommunity
                            name: setCommunity
                            label: 'Set Community'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapInlocalPref:
                            id: peerGrouprouteMapInlocalPref
                            name: localPref
                            label: 'Local Pref'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapInasPathPrependRepeat:
                            id: peerGrouprouteMapInasPathPrependRepeat
                            name: asPathPrependRepeat
                            label: 'AS Path Prepend Repeat'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapInrouteMapInGroup:
                            id: peerGrouprouteMapInrouteMapInGroup
                            name: routeMapInGroup
                            label: 'Route Map In Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - peerGrouprouteMapInseqNum
                                        - peerGrouprouteMapIdescription
                                        - peerGrouprouteMapIpermitDeny
                                        - peerGrouprouteMapIprefixList
                                        - peerGrouprouteMapInmatchCommunity
                                        - peerGrouprouteMapInsetCommunity
                                        - peerGrouprouteMapInlocalPref
                                        - peerGrouprouteMapInasPathPrependRepeat
                        peerGrouprouteMapIn:
                            id: peerGrouprouteMapIn
                            name: routeMapIn
                            label: 'Route Map In'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: peerGrouprouteMapInrouteMapInGroup
                                key: ""
                        peerGrouprouteMapOutseqNum:
                            id: peerGrouprouteMapOutseqNum
                            name: seqNum
                            label: 'Seq Num'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapOutpermitDeny:
                            id: peerGrouprouteMapOutpermitDeny
                            name: permitDeny
                            label: 'Permit Deny'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: permit
                                static_options:
                                    values:
                                        - permit
                                        - deny
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapOutprefixList:
                            id: peerGrouprouteMapOutprefixList
                            name: prefixList
                            label: 'Prefix List'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options:
                                    values:
                                        - '{"fieldId":"prefixListsprefixListName"}'
                        peerGrouprouteMapOutmatchCommunity:
                            id: peerGrouprouteMapOutmatchCommunity
                            name: matchCommunity
                            label: 'Match Community'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapOutsetCommunity:
                            id: peerGrouprouteMapOutsetCommunity
                            name: setCommunity
                            label: 'Set Community'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapOutasPathPrependRepeat:
                            id: peerGrouprouteMapOutasPathPrependRepeat
                            name: asPathPrependRepeat
                            label: 'AS Path Prepend Repeat'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapOutdescription:
                            id: peerGrouprouteMapOutdescription
                            name: description
                            label: Description
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGrouprouteMapOutGroup:
                            id: peerGrouprouteMapOutGroup
                            name: routeMapOutGroup
                            label: 'Route Map Out Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - peerGrouprouteMapOutseqNum
                                        - peerGrouprouteMapOutpermitDeny
                                        - peerGrouprouteMapOutprefixList
                                        - peerGrouprouteMapOutmatchCommunity
                                        - peerGrouprouteMapOutsetCommunity
                                        - peerGrouprouteMapOutasPathPrependRepeat
                                        - peerGrouprouteMapOutdescription
                        peerGrouprouteMapOut:
                            id: peerGrouprouteMapOut
                            name: routeMapOut
                            label: 'Route Map Out'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: peerGrouprouteMapOutGroup
                                key: ""
                        ebgpNeighborspeerAsn:
                            id: ebgpNeighborspeerAsn
                            name: peerAsn
                            label: 'Peer ASN'
                            description: 'Overrides Group ASN'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        ebgpNeighborsneighborIp:
                            id: ebgpNeighborsneighborIp
                            name: neighborIp
                            label: 'Neighbor IP'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        eBgpNeighborsGroup:
                            id: eBgpNeighborsGroup
                            name: eBgpNeighborsGroup
                            label: 'eBGP Neighbors Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - ebgpNeighborspeerAsn
                                        - ebgpNeighborsneighborIp
                        eBgpNeighbors:
                            id: eBgpNeighbors
                            name: eBgpNeighbors
                            label: 'eBGP Neighbors'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: eBgpNeighborsGroup
                                key: ebgpNeighborsneighborIp
                        pgredistributeRoutes:
                            id: pgredistributeRoutes
                            name: redistributeRoutes
                            label: 'Redistribute Routes'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: ENABLED
                                static_options:
                                    values:
                                        - ENABLED
                                        - NOT-ENABLED
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        peerGroup:
                            id: peerGroup
                            name: peerGroup
                            label: 'Peer Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - peerGroupName
                                        - peerGrouppeerAsn
                                        - peerGroupdescription
                                        - peerGrouplocalAs
                                        - peerGroupnextHopSelf
                                        - peerGroupmaximumAcceptedRoutes
                                        - peerGroupeBgpMultiHopTtl
                                        - peerGroupbfd
                                        - peerGrouprouteMapIn
                                        - peerGrouprouteMapOut
                                        - eBgpNeighbors
                                        - pgredistributeRoutes
                        ebgpNeighborspeerGroups:
                            id: ebgpNeighborspeerGroups
                            name: peerGroups
                            label: 'BGP Peer Groups'
                            description: 'Define neighbors and policy'
                            required: false
                            type: INPUT_FIELD_TYPE_COLLECTION
                            collection_props:
                                base_field_id: peerGroup
                                key: peerGroupName
                        externalInterfacedescription:
                            id: externalInterfacedescription
                            name: description
                            label: Description
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        externalInterfaceipPrefix:
                            id: externalInterfaceipPrefix
                            name: ipPrefix
                            label: 'IP Prefix'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        externalInterfacevlanId:
                            id: externalInterfacevlanId
                            name: vlanId
                            label: 'VLAN ID'
                            description: 'Optional. Used for sub-interfaces'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        externalInterfaceGroup:
                            id: externalInterfaceGroup
                            name: externalInterfaceGroup
                            label: 'External Interface Group'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - externalInterfacedescription
                                        - externalInterfaceipPrefix
                                        - externalInterfacevlanId
                        externalInterfaces:
                            id: externalInterfaces
                            name: externalInterfaces
                            label: 'External Interfaces'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: externalInterfaceGroup
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_INTERFACE_TAG
                                input_tag_label: interface
                                tag_filter_query: null
                        peLinkDetails:
                            id: peLinkDetails
                            name: erLinkDetails
                            label: 'Link Details'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - peMLAGInterface1
                                        - peMLAGInterface2
                                        - peneighbors
                                        - peloopback0Address
                                        - loopback1Address
                                        - rrHostnames
                                        - staticRoutes
                                        - prefixLists
                                        - ebgpNeighborspeerGroups
                                        - externalInterfaces
                        peDetails:
                            id: peDetails
                            name: erDetails
                            label: 'Edge Router Domain Members'
                            description: 'Single Device or MLAG Pair'
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: peLinkDetails
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_DEVICE_TAG
                                input_tag_label: device
                                tag_filter_query: null
                        peDomain:
                            id: peDomain
                            name: erDomain
                            label: 'Edge Router Domain'
                            description: 'Single Device or MLAG Pair'
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - peDetails
                        peDomains:
                            id: peDomains
                            name: erDomains
                            label: 'Edge Router Domains'
                            description: 'Single device or Pair of devices'
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: peDomain
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_DEVICE_TAG
                                input_tag_label: Edge-Router-Domain
                                tag_filter_query: null
                        prrhostName:
                            id: prrhostName
                            name: prrhostName
                            label: 'RR Host Name'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prrinterface:
                            id: prrinterface
                            name: prrinterface
                            label: 'RR Interface'
                            description: 'This field is only used for interface descriptions'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prripAddress:
                            id: prripAddress
                            name: prripAddress
                            label: 'Local IP Address'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prrsubnetMask:
                            id: prrsubnetMask
                            name: prrsubnetMask
                            label: 'Local Subnet Mask'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: '31'
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        prrDetails:
                            id: prrDetails
                            name: prrDetails
                            label: 'RR Details'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - prrhostName
                                        - prrinterface
                                        - prripAddress
                                        - prrsubnetMask
                        rRs:
                            id: rRs
                            name: rRs
                            label: 'Route Reflectors'
                            description: 'Only required if a RR is directly connected to this P Router'
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: prrDetails
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_INTERFACE_TAG
                                input_tag_label: interface
                                tag_filter_query: null
                        phostName:
                            id: phostName
                            name: phostName
                            label: 'Neighbor Host Name'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        pinterface:
                            id: pinterface
                            name: pinterface
                            label: 'Neighbor Interface'
                            description: 'This field is only used for interface descriptions'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        ipAddress:
                            id: ipAddress
                            name: pipAddress
                            label: 'Local IP Address'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        psubnetMask:
                            id: psubnetMask
                            name: psubnetMask
                            label: 'Subnet Mask'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: '31'
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        pneighborDetails:
                            id: pneighborDetails
                            name: pneighborDetails
                            label: 'Neighbor Details'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - phostName
                                        - pinterface
                                        - ipAddress
                                        - psubnetMask
                        pneighbor:
                            id: pneighbor
                            name: pneighbor
                            label: Neighbors
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: pneighborDetails
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_INTERFACE_TAG
                                input_tag_label: interface
                                tag_filter_query: null
                        ploopback0Address:
                            id: ploopback0Address
                            name: loopback0Address
                            label: 'Loopback0 Address'
                            description: 'For overlay routing and Mgmt.'
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: null
                                static_options: null
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        pLinkDetails:
                            id: pLinkDetails
                            name: pLinkDetails
                            label: 'P Link Details'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - rRs
                                        - pneighbor
                                        - ploopback0Address
                        pRouters:
                            id: pRouters
                            name: pRouters
                            label: 'Core Routers'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: pLinkDetails
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_DEVICE_TAG
                                input_tag_label: device
                                tag_filter_query: null
                        igp:
                            id: igp
                            name: igp
                            label: 'Underlay Routing'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: OSPF
                                static_options:
                                    values:
                                        - OSPF
                                        - ISIS
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        redistributeConnected:
                            id: redistributeConnected
                            name: redistributeConnected
                            label: 'Redistribute Connected'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: ENABLED
                                static_options:
                                    values:
                                        - NOT-ENABLED
                                        - ENABLED
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        redistributeStatic:
                            id: redistributeStatic
                            name: redistributeStatic
                            label: 'Redistribute Static'
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_STRING
                            string_props:
                                default_value: ENABLED
                                static_options:
                                    values:
                                        - NOT-ENABLED
                                        - ENABLED
                                format: null
                                length: null
                                pattern: null
                                dynamic_options: null
                        pod:
                            id: pod
                            name: pod
                            label: 'Network Name'
                            description: 'A single pe-rr fabric instance'
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - commonMlagConfig
                                        - commonBGPConfig
                                        - rrs
                                        - peDomains
                                        - pRouters
                                        - igp
                                        - redistributeConnected
                                        - redistributeStatic
                        pods:
                            id: pods
                            name: pods
                            label: 'Network Name'
                            description: 'Tags to use: Network: "name",  RR-Number, Edge-Router-Domain: , Edge-Router-Number:, Core-Router-Number: '
                            required: false
                            type: INPUT_FIELD_TYPE_RESOLVER
                            resolver_props:
                                base_field_id: pod
                                display_mode: RESOLVER_FIELD_DISPLAY_MODE_SPARSE
                                input_mode: RESOLVER_FIELD_INPUT_MODE_SINGLE_DEVICE_TAG
                                input_tag_label: Network
                                tag_filter_query: null
                        root:
                            id: root
                            name: ""
                            label: ""
                            description: ""
                            required: false
                            type: INPUT_FIELD_TYPE_GROUP
                            group_props:
                                members:
                                    values:
                                        - pods
                layout:
                    value: '{"pod":{"key":"pod","type":"INPUT","order":["igp","redistributeConnected","redistributeStatic","commonBGPConfig","peDomains","pRouters","rrs","commonMlagConfig"]},"pods":{"key":"pods","isPageLayout":true,"type":"INPUT","showDefaultRow":false},"rrInterfaceParams":{"key":"rrInterfaceParams","type":"INPUT","order":["loopback0Address","rrDownlink"]},"peLinkDetails":{"key":"peLinkDetails","type":"INPUT","order":["peloopback0Address","loopback1Address","rrHostnames","peneighbors","peMLAGInterface1","peMLAGInterface2","staticRoutes","prefixLists","ebgpNeighborspeerGroups","externalInterfaces"]},"asNumber":{"key":"asNumber","type":"INPUT","dependency":{"asNumber":{"value":["65100"],"mode":"HIDE"}}},"peDetails":{"key":"peDetails","isPageLayout":true,"type":"INPUT","showDefaultRow":false},"peMLAGInterface1":{"key":"peMLAGInterface1","type":"INPUT","dependency":{"peMLAGInterface2":{"value":["dummy"],"mode":"HIDE"}}},"peMLAGInterface2":{"key":"peMLAGInterface2","type":"INPUT","dependency":{}},"mlagLinkSubnet":{"key":"mlagLinkSubnet","type":"INPUT","dependency":{}},"internalVlan":{"key":"internalVlan","type":"INPUT","dependency":{}},"mlagPortChannelId":{"key":"mlagPortChannelId","type":"INPUT","dependency":{}},"virtualRouterMac":{"key":"virtualRouterMac","type":"INPUT","dependency":{}},"peASbase":{"key":"peASbase","type":"INPUT","dependency":{}},"pLinkDetails":{"key":"pLinkDetails","type":"INPUT","order":["ploopback0Address","rRs","pneighbor"]},"fabricLinksSubnet":{"key":"fabricLinksSubnet","type":"INPUT","dependency":{}},"fabricSubnetMask":{"key":"fabricSubnetMask","type":"INPUT","dependency":{}},"peLoopback1Subnet":{"key":"peLoopback1Subnet","type":"INPUT","dependency":{"mpls":{"value":["SR","LDP","NONE","SR-TE","RSVP"],"mode":"HIDE"}}},"3bb4bb4d-3ffa-49ab-8318-e588edddf4ee":{"key":"3bb4bb4d-3ffa-49ab-8318-e588edddf4ee","type":"INPUT","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}}},"4d1b8f45-0f26-4049-82d3-4dddd16480b4":{"key":"4d1b8f45-0f26-4049-82d3-4dddd16480b4","type":"INPUT","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}}},"4e6cd56c-54c3-420c-bd74-96fbf3c8010a":{"key":"4e6cd56c-54c3-420c-bd74-96fbf3c8010a","type":"INPUT","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}}},"rrs":{"key":"rrs","isPageLayout":true,"type":"INPUT","showDefaultRow":false},"peLoopback0Subnet":{"key":"peLoopback0Subnet","type":"INPUT","dependency":{}},"rrLoopback0Subnet":{"key":"rrLoopback0Subnet","type":"INPUT","dependency":{}},"loopback1Address":{"key":"loopback1Address","dependency":{"evpnAndVxlan":{"value":["NOT-ENABLED"],"mode":"HIDE"}},"type":"INPUT"},"fpenodeSegmentIndex":{"key":"fpenodeSegmentIndex","type":"INPUT","dependency":{"mpls":{"value":["LDP","RSVP","NONE","VXLAN"],"mode":"HIDE"}}},"pnodeSegmentIndex":{"key":"pnodeSegmentIndex","type":"INPUT","dependency":{"mpls":{"value":["LDP","RSVP","NONE","VXLAN"],"mode":"HIDE"}}},"srTiFla":{"key":"srTiFla","valueToLabelMap":{"YES":"OK","NO":"NO","ENABLED":"ENABLED","NOT-ENABLED":"NOT-ENABLED"},"dependency":{"mpls":{"value":["NONE","VXLAN","RSVP","LDP"],"mode":"HIDE"}},"type":"INPUT"},"557303b1-6ee1-48cf-858a-254ee3c0f2c7":{"key":"557303b1-6ee1-48cf-858a-254ee3c0f2c7","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"2be1fb95-d687-47fd-8c26-e23068f12783":{"key":"2be1fb95-d687-47fd-8c26-e23068f12783","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"0d68c481-d05c-4068-9547-5706d2600697":{"key":"0d68c481-d05c-4068-9547-5706d2600697","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"15d6861b-c312-49bc-95a6-1cf0a68e5318":{"key":"15d6861b-c312-49bc-95a6-1cf0a68e5318","dependency":{"mpls":{"value":["VXLAN","RSVP","SR","LDP"],"mode":"HIDE"}},"type":"INPUT"},"d0ae26fb-34cd-4322-8775-4058b6b30d32":{"key":"d0ae26fb-34cd-4322-8775-4058b6b30d32","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"fe5eb0d2-6796-4487-b3be-e3914a66ae23":{"key":"fe5eb0d2-6796-4487-b3be-e3914a66ae23","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"3ee8cb8c-9693-44c5-88e5-06c6f6c2fb5e":{"key":"3ee8cb8c-9693-44c5-88e5-06c6f6c2fb5e","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"0d9e30e5-5032-44ec-ae17-03180f1c2244":{"key":"0d9e30e5-5032-44ec-ae17-03180f1c2244","type":"INPUT","order":["557303b1-6ee1-48cf-858a-254ee3c0f2c7","1b0abd50-9227-4ce5-a317-4012bbdfa0c0","2be1fb95-d687-47fd-8c26-e23068f12783","0d68c481-d05c-4068-9547-5706d2600697","fe5eb0d2-6796-4487-b3be-e3914a66ae23","d0ae26fb-34cd-4322-8775-4058b6b30d32","15d6861b-c312-49bc-95a6-1cf0a68e5318","3ee8cb8c-9693-44c5-88e5-06c6f6c2fb5e"]},"1b0abd50-9227-4ce5-a317-4012bbdfa0c0":{"key":"1b0abd50-9227-4ce5-a317-4012bbdfa0c0","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}}},"endPoint":{"key":"endPoint","type":"INPUT","order":["tepolname","tepol"]},"tepol":{"key":"tepol","type":"INPUT","isPageLayout":true},"tepolname":{"key":"tepolname","dependency":{"mpls":{"value":["SR-TE"],"mode":"SHOW"}},"type":"INPUT"},"tename":{"key":"tename","dependency":{"mpls":{"value":["SR-TE"],"mode":"SHOW"}},"type":"INPUT"},"tedescription":{"key":"tedescription","dependency":{"mpls":{"value":["SR-TE"],"mode":"SHOW"}},"type":"INPUT"},"color":{"key":"color","dependency":{"mpls":{"value":["SR-TE"],"mode":"SHOW"}},"type":"INPUT"},"matchAllRTs":{"key":"matchAllRTs","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","NONE","RSVP","LDP","SR"],"mode":"HIDE"}}},"5c1af054-423b-4fe7-9c6c-c8f4df405184":{"key":"5c1af054-423b-4fe7-9c6c-c8f4df405184","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}},"type":"INPUT"},"a0bb1533-b410-4c5f-8642-7e9c4b1bc28b":{"key":"a0bb1533-b410-4c5f-8642-7e9c4b1bc28b","dependency":{"mpls":{"value":["VXLAN","RSVP","LDP","SR"],"mode":"HIDE"}},"type":"INPUT"},"rtValue":{"key":"rtValue","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","NONE","RSVP","LDP","SR"],"mode":"HIDE"}}},"bindingId":{"key":"bindingId","type":"INPUT","dependency":{"mpls":{"value":["VXLAN","NONE","RSVP","LDP","SR"],"mode":"HIDE"}}},"teEndPoints":{"key":"teEndPoints","type":"INPUT","isPageLayout":true},"polvalue":{"key":"polvalue","type":"INPUT","order":["tename","tedescription","color","pathPreference","matchAllRTs","rTs","bindingId"]},"preference":{"key":"preference","dependency":{"mpls":{"value":["SR-TE"],"mode":"SHOW"}},"type":"INPUT"},"segmentList":{"key":"segmentList","dependency":{"mpls":{"value":["SR-TE"],"mode":"SHOW"}},"type":"INPUT"},"peDomains":{"key":"peDomains","type":"INPUT","showDefaultRow":false},"pRouters":{"key":"pRouters","showDefaultRow":false,"type":"INPUT","isPageLayout":true},"isisAuthKey":{"key":"isisAuthKey","type":"INPUT","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}}},"ospfAuthKey":{"key":"ospfAuthKey","type":"INPUT","dependency":{"igp":{"value":["ISIS"],"mode":"HIDE"}}},"peneighbors":{"key":"peneighbors","type":"INPUT","showDefaultRow":false},"rRs":{"key":"rRs","type":"INPUT","showDefaultRow":false},"pneighbor":{"key":"pneighbor","type":"INPUT","showDefaultRow":false},"rrBGPDynamicNeighbors":{"key":"rrBGPDynamicNeighbors","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}},"type":"INPUT"},"evpnEnabled":{"key":"evpnEnabled","dependency":{"rrAS":{"value":[],"mode":"HIDE"}},"type":"INPUT"},"l3vpnEnabled":{"key":"l3vpnEnabled","dependency":{"rrAS":{"value":[],"mode":"HIDE"}},"type":"INPUT"},"bgpAuthKey":{"key":"bgpAuthKey","dependency":{"rrAS":{"value":[],"mode":"HIDE"}},"type":"INPUT"},"staticRoutes":{"key":"staticRoutes","type":"INPUT","isPageLayout":false},"prefixLists":{"key":"prefixLists","type":"INPUT","isPageLayout":true},"prefixListsseqNums":{"key":"prefixListsseqNums","type":"INPUT","isPageLayout":false},"prefixListsseqNumsvalue":{"key":"prefixListsseqNumsvalue","type":"INPUT","order":["prefixListsseqNum","prefixListsseqpermitDeny","prefixListsseqprefix","prefixListsseqprefixLength","prefixListsseqmaskLength"]},"peerGrouprouteMapOutGroup":{"key":"peerGrouprouteMapOutGroup","type":"INPUT","order":["peerGrouprouteMapOutseqNum","peerGrouprouteMapOutdescription","peerGrouprouteMapOutpermitDeny","peerGrouprouteMapOutprefixList","peerGrouprouteMapOutmatchCommunity","peerGrouprouteMapOutsetCommunity","peerGrouprouteMapOutasPathPrependRepeat"]},"ebgpNeighborspeerGroups":{"key":"ebgpNeighborspeerGroups","type":"INPUT","isPageLayout":true},"eBgpNeighborsGroup":{"key":"eBgpNeighborsGroup","type":"INPUT","order":["ebgpNeighborsneighborIp","ebgpNeighborspeerAsn"]},"eBgpNeighbors":{"key":"eBgpNeighbors","isPageLayout":false,"type":"INPUT"},"externalInterfaces":{"key":"externalInterfaces","type":"INPUT","showDefaultRow":false,"isPageLayout":false},"redistributeConnected":{"key":"redistributeConnected","type":"INPUT","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}}},"redistributeStatic":{"key":"redistributeStatic","type":"INPUT","dependency":{"igp":{"value":["OSPF"],"mode":"HIDE"}}},"rrHostname":{"key":"rrHostname","type":"INPUT","dependency":{}},"peerGroup":{"key":"peerGroup","type":"INPUT","order":["peerGroupName","peerGroupdescription","peerGrouppeerAsn","eBgpNeighbors","pgredistributeRoutes","peerGrouplocalAs","peerGroupnextHopSelf","peerGroupmaximumAcceptedRoutes","peerGroupeBgpMultiHopTtl","peerGroupbfd","peerGrouprouteMapIn","peerGrouprouteMapOut"]},"loopback0Address":{"key":"loopback0Address","type":"INPUT","dependency":{"evpnAndVxlan":{"value":["NOT-ENABLED"],"mode":"HIDE"}}},"rrLinkPeer":{"key":"rrLinkPeer","type":"INPUT","dependency":{"evpnAndVxlan":{"value":["NOT-ENABLED"],"mode":"HIDE"}}},"rrLinkPeerInterface":{"key":"rrLinkPeerInterface","type":"INPUT","dependency":{"evpnAndVxlan":{"value":["NOT-ENABLED"],"mode":"HIDE"}}},"rripAddress":{"key":"rripAddress","type":"INPUT","dependency":{"evpnAndVxlan":{"value":["NOT-ENABLED"],"mode":"HIDE"}}},"rsubnetMask":{"key":"rsubnetMask","type":"INPUT","dependency":{"evpnAndVxlan":{"value":["NOT-ENABLED"],"mode":"HIDE"}}},"rrDownlink":{"key":"rrDownlink","type":"INPUT","showDefaultRow":false}}'
